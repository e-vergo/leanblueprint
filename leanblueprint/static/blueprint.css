a.github_link {
  font-weight: normal;
  font-size: 90%;
  text-decoration: none;
  color: inherit;
}

/* Override plasTeX default narrow content width for side-by-side layout */
div.content-wrapper {
  max-width: 1800px;  /* Much wider than default 75ch */
}

/* Side-by-side container for theorem/definition + Lean code */
.sbs-container {
  display: grid;
  grid-template-columns: minmax(75ch, 75ch) minmax(0, 1fr);  /* Fixed LaTeX, flexible Lean */
  gap: 3rem;  /* Gap between LaTeX and Lean columns */
  align-items: start;
  margin-bottom: 3rem;  /* Vertical spacing between declarations */
  margin-left: 3rem;  /* Match gap from sidebar */
}

.sbs-latex-column {
  width: 75ch;
  max-width: 75ch;
  overflow-wrap: break-word;
  word-wrap: break-word;
}

.sbs-lean-column {
  min-width: 0;
  overflow-wrap: break-word;
  word-wrap: break-word;
  overflow-x: auto;  /* Scroll long lines instead of pushing layout */
}

/* Lean code - plain styling on page background */
.sbs-lean-column pre.lean-code {
  margin: 0;
  padding: 0;
  background: transparent;
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  font-size: 0.85rem;
  line-height: 1.5;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sbs-lean-column pre.lean-code code {
  font-family: inherit;
}

/* GitHub link - appears on hover only */
.sbs-lean-column {
  position: relative;
}

.lean-github-hover {
  position: absolute;
  top: 0;
  right: 0;
  opacity: 0;
  transition: opacity 0.2s;
  padding: 0.25rem;
  color: #586069;
}

.lean-github-hover:hover {
  color: #0366d6;
}

.sbs-lean-column:hover .lean-github-hover {
  opacity: 1;
}

/* Lean proof body starts collapsed (matching ▶ icon default state) */
/* jQuery slideUp/slideDown handles the animation */
.lean-proof-body {
  display: none;
}

/* Hide old sequential panel */
.thm_body_extras {
  display: none;
}

/* Prevent showmore.js from hiding inline proofs in SBS layout */
/* These proofs are rendered inline with their theorems and should always be visible */
.proof_wrapper.proof_inline {
  display: block !important;
}

/* Start inline proof content collapsed (matching ▶ icon default state) */
.proof_wrapper.proof_inline .proof_content {
  display: none;
}

/* SubVerso Lean Syntax Highlighting - VSCode-inspired colors */
/* Supports: leanblueprint classes (lean-*), Verso wrapped (.hl.lean .X), and Verso bare (.X.token) */

/* Keywords: def, theorem, if, then, etc. */
.lean-keyword, .hl.lean .keyword, .keyword.token { color: #0000ff; }

/* Constants and functions */
.lean-const, .hl.lean .const, .const.token { color: #AF8700; }
.lean-const.lean-def, .hl.lean .const[data-defining="true"], .const.token[data-defining="true"] {
  font-weight: bold;
  text-decoration: underline;
  text-decoration-style: dotted;
  text-underline-offset: 2px;
}

/* Local variables */
.lean-var, .hl.lean .var, .var.token { color: #0070C1; }

/* Hover styling for tokens with type info */
.lean-const[title],
.lean-var[title],
.lean-keyword[title],
.lean-sort[title],
.const.token[title],
.var.token[title],
.keyword.token[title],
.sort.token[title] {
  cursor: help;
}

.lean-const[title]:hover,
.lean-var[title]:hover,
.const.token[title]:hover,
.var.token[title]:hover {
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 2px;
}

/* String literals - "literal string" in Verso */
.lean-string, .hl.lean .literal.string, .literal.string.token { color: #a31515; }

/* Options */
.lean-option, .hl.lean .option, .option.token { color: #795e26; }

/* Doc comments */
.lean-docstring, .hl.lean .doc-comment, .doc-comment.token { color: #008000; font-style: italic; }

/* Sorts: Type, Prop, Sort */
.lean-sort, .hl.lean .sort, .sort.token { color: #267f99; }

/* Universe levels */
.lean-level, .hl.lean .level-var, .hl.lean .level-const, .hl.lean .level-op,
.level-var.token, .level-const.token, .level-op.token { color: #098658; }

/* Module names */
.lean-module, .hl.lean .module-name, .module-name.token { color: #795e26; }

/* Typed expressions */
.lean-expr, .hl.lean .typed, .typed.token { color: inherit; }

/* Plain text and unknown tokens */
.lean-text, .hl.lean .unknown, .hl.lean .inter-text, .unknown.token, .inter-text { color: inherit; }

/* Sorry */
.lean-sorry, .sorry.token { color: #ff0000; background-color: #ffeaea; font-weight: bold; }

/* Lexical token highlighting (regex-based) */
.lean-number { color: #098658; }  /* Green - numbers */
.lean-operator { color: #000000; }  /* Black - operators */
.lean-comment { color: #008000; font-style: italic; }  /* Green - comments */

/* Rainbow brackets - VSCode light theme colors (One Light inspired) */
.lean-bracket-1 { color: #d000ff; }  /* DarkGoldenrod - saturated gold */
.lean-bracket-2 { color: #5126ff; }  /* Magenta/Purple */
.lean-bracket-3 { color: #0184BC; }  /* Cyan */
.lean-bracket-4 { color: #4078F2; }  /* Blue */
.lean-bracket-5 { color: #50A14F; }  /* Green */
.lean-bracket-6 { color: #E45649; }  /* Red */

/* Message spans - both leanblueprint and Verso class names */
.lean-span, .hl.lean .has-info { }
.lean-error, .hl.lean .has-info.error { text-decoration: wavy underline #c82829; }
.lean-warning, .hl.lean .has-info.warning { text-decoration: wavy underline #eab700; }
.lean-info, .hl.lean .has-info.information { text-decoration: underline dotted #4271ae; }

/* Point markers */
.lean-point { display: inline-block; width: 0; height: 0; }
.lean-point-error::before { content: "●"; color: #c82829; font-size: 0.7em; }
.lean-point-warning::before { content: "●"; color: #eab700; font-size: 0.7em; }
.lean-point-info::before { content: "●"; color: #4271ae; font-size: 0.7em; }

/* Goals display */
.lean-tactic { cursor: pointer; }
.lean-goals {
  background-color: #f5f5f5;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 8px;
  margin: 4px 0;
  font-family: monospace;
  font-size: 0.9em;
}
.lean-goal {
  margin-bottom: 8px;
  padding-bottom: 8px;
  border-bottom: 1px solid #eee;
}
.lean-goal:last-child {
  margin-bottom: 0;
  padding-bottom: 0;
  border-bottom: none;
}
.lean-goal-header {
  color: #666;
  font-style: italic;
  margin-bottom: 4px;
}
.lean-hypotheses {
  margin-left: 8px;
}
.lean-hypothesis {
  margin: 2px 0;
}
.lean-hyp-names { color: #c82829; }
.lean-hyp-colon { color: #666; }
.lean-conclusion {
  margin-top: 4px;
}
.lean-turnstile {
  color: #666;
  margin-right: 4px;
}
.lean-goal-message {
  color: #718c00;
  font-style: italic;
}

/* Error rendering */
.lean-render-error {
  color: #c82829;
  font-style: italic;
}

/* Hover tooltips for Lean code */
.lean-hover-tooltip {
  position: absolute;
  z-index: 1000;
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  border-radius: 4px;
  padding: 8px 12px;
  max-width: 600px;
  font-family: monospace;
  font-size: 0.85em;
  line-height: 1.4;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* ========== Verso-style Interactive Features ========== */

/* Token binding highlight - when hovering over a variable, highlight all occurrences */
.hl.lean .token.binding-hl {
  background-color: rgba(255, 255, 0, 0.3);
  border-radius: 2px;
}

/* Hover info container */
.hl.lean .hover-info {
  display: block;
  padding: 8px;
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  font-size: 0.9em;
}

.hl.lean .hover-info code {
  font-family: inherit;
}

/* Separator between signature and docstring */
.hl.lean .sep {
  display: block;
  height: 1px;
  background-color: #ccc;
  margin: 8px 0;
}

/* Docstring styling */
.hl.lean .docstring {
  color: #666;
  font-style: italic;
  margin-top: 8px;
}

.hl.lean .docstring p {
  margin: 0.5em 0;
}

.hl.lean .docstring code {
  background-color: rgba(0, 0, 0, 0.05);
  padding: 0 4px;
  border-radius: 2px;
}

/* Extra documentation links */
.extra-doc-links {
  list-style-type: none;
  margin-left: 0;
  padding: 0;
  margin-top: 8px;
  border-top: 1px solid #ccc;
  padding-top: 8px;
}

.extra-doc-links > li {
  display: inline-block;
}

.extra-doc-links > li:not(:last-child)::after {
  content: '|';
  display: inline-block;
  margin: 0 0.25em;
  color: #999;
}

/* ========== Tippy.js Theme Customization ========== */

/* Ensure tooltips appear above other content */
[data-tippy-root] {
  z-index: 99999 !important;
}

.tippy-box {
  /* Prevent mobile Safari font size inconsistency */
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* Lean theme - default for type info hovers */
.tippy-box[data-theme~='lean'] {
  background-color: #f5f5f5;
  color: black;
  border: 1px solid #333;
  border-radius: 4px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.tippy-box[data-theme~='lean'] .tippy-content {
  padding: 8px 12px;
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  font-size: 0.85em;
}

.tippy-box[data-theme~='lean'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #f5f5f5;
}
.tippy-box[data-theme~='lean'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #f5f5f5;
}
.tippy-box[data-theme~='lean'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #f5f5f5;
}
.tippy-box[data-theme~='lean'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #f5f5f5;
}

/* Warning theme - for warning messages */
.tippy-box[data-theme~='warning'] {
  background-color: #fff8e6;
  color: black;
  border: 2px solid #f0ad4e;
  border-radius: 4px;
}

.tippy-box[data-theme~='warning'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #fff8e6;
}
.tippy-box[data-theme~='warning'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #fff8e6;
}

/* Error theme - for error messages */
.tippy-box[data-theme~='error'] {
  background-color: #fff0f0;
  color: black;
  border: 2px solid #d9534f;
  border-radius: 4px;
}

.tippy-box[data-theme~='error'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #fff0f0;
}
.tippy-box[data-theme~='error'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #fff0f0;
}

/* Info theme - for info messages */
.tippy-box[data-theme~='info'] {
  background-color: #f0f8ff;
  color: black;
  border: 2px solid #5bc0de;
  border-radius: 4px;
}

.tippy-box[data-theme~='info'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #f0f8ff;
}
.tippy-box[data-theme~='info'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #f0f8ff;
}

/* Tactic theme - for tactic state popups */
.tippy-box[data-theme~='tactic'] {
  background-color: white;
  color: black;
  border: 1px solid #333;
  border-radius: 4px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.2);
}

.tippy-box[data-theme~='tactic'] .tippy-content {
  padding: 12px;
}

.tippy-box[data-theme~='tactic'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: white;
}

/* Message theme modifier - larger arrows */
.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::before {
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::before {
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::before {
  border-width: 11px 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::before {
  border-width: 11px 11px 11px 0;
}

/* ========== Verso Message Styling ========== */

.verso-message .trace {
  display: block;
}

.verso-message .trace > summary::marker {
  color: inherit;
}

.verso-message .trace-children {
  margin: 0;
  padding: 0;
}

.verso-message .trace-children > li {
  list-style-type: none;
  margin-left: 1.5em;
}

.verso-message .trace-children > li:not(:has(.trace)) {
  margin-left: 0;
}

.verso-message .trace-class {
  color: color-mix(in srgb, currentColor 70%, transparent);
  font-weight: bold;
  margin: 0;
  padding: 0;
}

.verso-message .text {
  white-space: pre-wrap;
}

/* ========== Tactic State Display ========== */

/* Hidden checkbox toggle for tactic states */
.hl.lean input.tactic-toggle {
  display: none;
}

/* Tactic state container - hidden by default */
.hl.lean .tactic-state {
  display: none;
}

/* Show tactic state when checkbox is checked */
.hl.lean input.tactic-toggle:checked + .tactic-state {
  display: block;
  margin-top: 8px;
  padding: 8px;
  background-color: #f9f9f9;
  border: 1px solid #ddd;
  border-radius: 4px;
}

/* Tactic label styling */
.hl.lean .tactic > label {
  cursor: pointer;
}

/* Tactic indicator dot */
.hl.lean .tactic::before {
  content: '\25CF';  /* Bullet */
  color: #4271ae;
  font-size: 0.6em;
  vertical-align: super;
  margin-right: 2px;
  opacity: 0.5;
}

.hl.lean .tactic:hover::before {
  opacity: 1;
}

/* Goal display in tactic states */
.hl.lean .goal {
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid #eee;
}

.hl.lean .goal:last-child {
  margin-bottom: 0;
  padding-bottom: 0;
  border-bottom: none;
}

.hl.lean .goal-name {
  color: #666;
  font-style: italic;
  margin-bottom: 4px;
}

/* Hypotheses table */
.hl.lean .hypotheses {
  display: table;
  border-collapse: collapse;
  margin-bottom: 8px;
}

.hl.lean .hypotheses .hypothesis {
  display: table-row;
}

.hl.lean .hypotheses .name {
  display: table-cell;
  padding-right: 8px;
  text-align: right;
  color: #c82829;
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
}

.hl.lean .hypotheses .colon {
  display: table-cell;
  padding-right: 8px;
  color: #666;
}

.hl.lean .hypotheses .type {
  display: table-cell;
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
}

/* Goal conclusion */
.hl.lean .conclusion {
  margin-top: 8px;
}

.hl.lean .conclusion .goal-prefix {
  color: #666;
  margin-right: 4px;
}

.hl.lean .conclusion .type {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
}
